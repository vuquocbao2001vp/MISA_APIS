{"ast":null,"code":"import axios from \"axios\";\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\nimport PopupAddUser from \"./PopupAddUser.vue\";\nexport default {\n  components: {\n    PopupAddUser\n  },\n  props: [\"isHide\", \"groupSelectedId\"],\n\n  data() {\n    return {\n      isHidePopup: true,\n      timeout: null,\n      textSearch: \"\",\n      checkUserToDelete: [],\n      listDeleteUser: [],\n      userOfGroupSelected: []\n    };\n  },\n\n  computed: { ...mapGetters([\"groupSelected\"])\n  },\n  watch: {\n    groupSelectedId: function (value) {\n      if (value != null) {\n        this.getGroupDataById(value);\n        this.getUserDataOfGroupPaging(100, 1, value);\n      }\n    },\n    textSearch: function (value) {\n      this.getUserDataOfGroupPaging(100, 1, this.groupSelectedId, value);\n    },\n    isHidePopup: function (value) {\n      if (value) {\n        this.getUserDataOfGroupPaging(100, 1, this.groupSelectedId);\n      }\n    }\n  },\n  methods: { ...mapMutations([\"getGroupById\"]),\n    ...mapActions([\"getGroupDataById\"]),\n\n    /**\r\n     * Lấy ra từ khóa tìm kiếm sau khi nhập xong input\r\n     * Author; VQBao - 8/9/2022\r\n     */\n    getTextSearch(data) {\n      clearTimeout(this.timeout);\n      var self = this;\n      this.timeout = setTimeout(function () {\n        self.textSearch = data.value;\n      }, 500);\n    },\n\n    /**\r\n     * Ẩn dialog khi bấm vào icon tắt\r\n     * Author: VQBao - 30/8/2022\r\n     */\n    hideDialog() {\n      this.$emit(\"hideDialog\", true);\n    },\n\n    /**\r\n     * Khi click vào button thêm thành viên thì mở popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\n    addNewUser() {\n      this.hidePopup(false);\n    },\n\n    /**\r\n     * Ẩn hiện popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\n    hidePopup(isHide) {\n      this.isHidePopup = isHide;\n    },\n\n    /**\r\n     * Thực hiện xóa nhiều người dùng ra khỏi nhóm\r\n     * Author: VQBao - 12/9/2022\r\n     */\n    async deleteMultiUserOfGroup() {\n      if (this.listDeleteUser.length < this.userOfGroupSelected.length) {\n        try {\n          await axios.delete(`https://localhost:44382/api/v1/UserGroups/DeleteMultiUserOfGroup?groupId=` + this.groupSelectedId, {\n            data: this.listDeleteUser\n          }).then(() => {\n            this.checkUserToDelete = [];\n            this.listDeleteUser = [];\n            this.hideDialog();\n            this.$emit(\"loadData\");\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n\n    /**\r\n     * Lấy số lượng checkbox đang được check\r\n     * Author: VQBao - 12/9/2022\r\n     */\n    checkUserCheckbox(userId, index) {\n      if (this.checkUserToDelete[index]) {\n        this.listDeleteUser.push(userId);\n      } else {\n        let id = this.listDeleteUser.indexOf(userId);\n        this.listDeleteUser.splice(id, 1);\n      }\n\n      if (this.listDeleteUser.length > 0) {\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 278px)\";\n      } else {\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 226px)\";\n      }\n    },\n\n    /**\r\n     * Bỏ chọn tất cả các checkbox\r\n     * Author: VQBao - 12/9/2022\r\n     */\n    uncheckAllUser() {\n      this.checkUserToDelete = [];\n      this.listDeleteUser = [];\n    },\n\n    /**\r\n    * Phân trang tìm kiếm thành viên thuộc nhóm người dùng\r\n    * Author: VQBao - 8/9/2022\r\n    */\n    async getUserDataOfGroupPaging(pageSize, pageNumber, userGroupId, searchByText) {\n      try {\n        await axios.get(`https://localhost:44382/api/v1/UserGroups/MemberOfGroupPaging`, {\n          params: {\n            pageSize: pageSize,\n            pageNumber: pageNumber,\n            userGroupId: userGroupId,\n            searchByText: searchByText\n          }\n        }).then(response => {\n          this.userOfGroupSelected = response.data.Data;\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,UAAnC,QAAqD,MAArD;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,eAAe;EACbC,UAAU,EAAE;IACVD;EADU,CADC;EAIbE,KAAK,EAAE,CAAC,QAAD,EAAW,iBAAX,CAJM;;EAKbC,IAAI,GAAG;IACL,OAAO;MACLC,WAAW,EAAE,IADR;MAELC,OAAO,EAAE,IAFJ;MAGLC,UAAU,EAAE,EAHP;MAILC,iBAAiB,EAAE,EAJd;MAKLC,cAAc,EAAE,EALX;MAMLC,mBAAmB,EAAE;IANhB,CAAP;EAQD,CAdY;;EAebC,QAAQ,EAAE,EACR,GAAGX,UAAU,CAAC,CAAC,eAAD,CAAD;EADL,CAfG;EAkBbY,KAAK,EAAE;IACLC,eAAe,EAAE,UAAUC,KAAV,EAAiB;MAChC,IAAIA,KAAI,IAAK,IAAb,EAAmB;QACjB,KAAKC,gBAAL,CAAsBD,KAAtB;QACA,KAAKE,wBAAL,CAA8B,GAA9B,EAAmC,CAAnC,EAAsCF,KAAtC;MACF;IACD,CANI;IAOLP,UAAU,EAAE,UAAUO,KAAV,EAAiB;MAC3B,KAAKE,wBAAL,CAA8B,GAA9B,EAAmC,CAAnC,EAAsC,KAAKH,eAA3C,EAA4DC,KAA5D;IACD,CATI;IAULT,WAAW,EAAE,UAASS,KAAT,EAAe;MAC1B,IAAGA,KAAH,EAAS;QACP,KAAKE,wBAAL,CAA8B,GAA9B,EAAmC,CAAnC,EAAsC,KAAKH,eAA3C;MACF;IACF;EAdK,CAlBM;EAkCbI,OAAO,EAAE,EACP,GAAGnB,YAAY,CAAC,CAAC,cAAD,CAAD,CADR;IAEP,GAAGC,UAAU,CAAC,CAAC,kBAAD,CAAD,CAFN;;IAGP;;;;IAIAmB,aAAa,CAACd,IAAD,EAAO;MAClBe,YAAY,CAAC,KAAKb,OAAN,CAAZ;MACA,IAAIc,IAAG,GAAI,IAAX;MACA,KAAKd,OAAL,GAAee,UAAU,CAAC,YAAY;QACpCD,IAAI,CAACb,UAAL,GAAkBH,IAAI,CAACU,KAAvB;MACD,CAFwB,EAEtB,GAFsB,CAAzB;IAGD,CAbM;;IAcP;;;;IAIAQ,UAAU,GAAG;MACX,KAAKC,KAAL,CAAW,YAAX,EAAyB,IAAzB;IACD,CApBM;;IAqBP;;;;IAIAC,UAAU,GAAG;MACX,KAAKC,SAAL,CAAe,KAAf;IACD,CA3BM;;IA4BP;;;;IAIAA,SAAS,CAACC,MAAD,EAAS;MAChB,KAAKrB,WAAL,GAAmBqB,MAAnB;IACD,CAlCM;;IAmCP;;;;IAIA,MAAMC,sBAAN,GAA8B;MAC5B,IAAG,KAAKlB,cAAL,CAAoBmB,MAApB,GAA6B,KAAKlB,mBAAL,CAAyBkB,MAAzD,EAAgE;QAC9D,IAAI;UACF,MAAM/B,KAAK,CAACgC,MAAN,CAAc,2EAAD,GAA8E,KAAKhB,eAAhG,EAAgH;YAAET,IAAI,EAAE,KAAKK;UAAb,CAAhH,EAA8IqB,IAA9I,CAAmJ,MAAM;YAC7J,KAAKtB,iBAAL,GAAyB,EAAzB;YACA,KAAKC,cAAL,GAAsB,EAAtB;YACA,KAAKa,UAAL;YACA,KAAKC,KAAL,CAAW,UAAX;UACD,CALK,CAAN;QAMF,CAPA,CAOE,OAAOQ,KAAP,EAAc;UACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;QACF;MACF;IACD,CApDM;;IAqDP;;;;IAIAG,iBAAiB,CAACC,MAAD,EAASC,KAAT,EAAe;MAC9B,IAAG,KAAK5B,iBAAL,CAAuB4B,KAAvB,CAAH,EAAiC;QAC/B,KAAK3B,cAAL,CAAoB4B,IAApB,CAAyBF,MAAzB;MACF,CAFA,MAEO;QACL,IAAIG,EAAC,GAAI,KAAK7B,cAAL,CAAoB8B,OAApB,CAA4BJ,MAA5B,CAAT;QACA,KAAK1B,cAAL,CAAoB+B,MAApB,CAA2BF,EAA3B,EAA+B,CAA/B;MACF;;MACA,IAAG,KAAK7B,cAAL,CAAoBmB,MAApB,GAA6B,CAAhC,EAAkC;QAChCa,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CC,MAA7C,GAAsD,oBAAtD;MACF,CAFA,MAEO;QACLH,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CC,MAA7C,GAAsD,oBAAtD;MACF;IACD,CArEM;;IAsEP;;;;IAIAC,cAAc,GAAE;MACd,KAAKrC,iBAAL,GAAyB,EAAzB;MACA,KAAKC,cAAL,GAAsB,EAAtB;IACD,CA7EM;;IA+EP;;;;IAIA,MAAMO,wBAAN,CAA+B8B,QAA/B,EAAyCC,UAAzC,EAAqDC,WAArD,EAAkEC,YAAlE,EAAgF;MAC9E,IAAI;QACF,MAAMpD,KAAI,CACPqD,GADG,CACE,+DADF,EACkE;UACpEC,MAAM,EAAE;YACNL,QAAQ,EAAEA,QADJ;YAENC,UAAU,EAAEA,UAFN;YAGNC,WAAW,EAAEA,WAHP;YAINC,YAAY,EAAEA;UAJR;QAD4D,CADlE,EASHnB,IATG,CASGsB,QAAD,IAAc;UAClB,KAAK1C,mBAAL,GAA2B0C,QAAQ,CAAChD,IAAT,CAAciD,IAAzC;QACD,CAXG,CAAN;MAYF,CAbA,CAaE,OAAOtB,KAAP,EAAc;QACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACF;IACD;;EApGM;AAlCI,CAAf","names":["axios","mapMutations","mapActions","mapGetters","PopupAddUser","components","props","data","isHidePopup","timeout","textSearch","checkUserToDelete","listDeleteUser","userOfGroupSelected","computed","watch","groupSelectedId","value","getGroupDataById","getUserDataOfGroupPaging","methods","getTextSearch","clearTimeout","self","setTimeout","hideDialog","$emit","addNewUser","hidePopup","isHide","deleteMultiUserOfGroup","length","delete","then","error","console","log","checkUserCheckbox","userId","index","push","id","indexOf","splice","document","getElementById","style","height","uncheckAllUser","pageSize","pageNumber","userGroupId","searchByText","get","params","response","Data"],"sourceRoot":"","sources":["E:\\MisaProject\\MISA_APIS\\misa_apis\\src\\screens\\establish\\userGroup\\DialogUserGroupDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"dialog-user-group-detail\" :class=\"{ hide: isHide }\">\r\n    <div class=\"icon-close-detail flex\" @click=\"hideDialog\">\r\n      <div class=\"icon-close\"></div>\r\n    </div>\r\n    <div class=\"top-block\">\r\n      <div class=\"group-title flex\">\r\n        <div class=\"group-name\">{{ groupSelected.UserGroupName }}</div>\r\n        <div class=\"group-status flex\">\r\n          <div class=\"active-dot\"></div>\r\n          Đang sử dụng\r\n        </div>\r\n      </div>\r\n      <div class=\"group-description\">{{ groupSelected.Description }}</div>\r\n      <div class=\"line-16\"></div>\r\n      <div class=\"group-member-text\">\r\n        Thành viên (<span>{{ userOfGroupSelected.length }}</span\r\n        >)\r\n      </div>\r\n      <div class=\"block-toolbar flex\">\r\n        <div class=\"block-input\">\r\n          <DxTextBox\r\n            placeholder=\"Tìm kiếm thành viên\"\r\n            value-change-event=\"keyup\"\r\n            @value-changed=\"getTextSearch\"\r\n          />\r\n        </div>\r\n        <div class=\"block-button-add\" @click=\"addNewUser\">\r\n          <BaseButton buttonType=\"icon\" buttonName=\"Thêm thành viên\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"block-navbar flex\" v-show=\"listDeleteUser.length > 0\">\r\n        <div class=\"selected-quantity\"><span>{{listDeleteUser.length}}</span> đang chọn</div>\r\n        <div class=\"disselect-span\" @click=\"uncheckAllUser\">Bỏ chọn</div>\r\n        <div class=\"delete-member-button\" @click=\"deleteMultiUserOfGroup\">\r\n          <BaseButton buttonType=\"red\" buttonName=\"Loại bỏ thành viên\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div id=\"scrollBlock\" class=\"scroll-block\">\r\n      <div\r\n        class=\"member-item flex\"\r\n        v-for=\"(user, index) in userOfGroupSelected\"\r\n        :key=\"user.UserID\"\r\n      >\r\n        <div class=\"member-item-checkbox\">\r\n          <div @click=\"checkUserCheckbox(user.UserID, index)\"><DxCheckBox v-model:value=\"checkUserToDelete[index]\"/></div>\r\n        </div>\r\n        <div class=\"member-image icon-center avatar-girl\"></div>\r\n        <div class=\"member-info\">\r\n          <div class=\"member-name flex\">\r\n            {{ user.FullName }} (\r\n            <div class=\"member-email\">{{ user.Email }}</div>\r\n            )\r\n          </div>\r\n          <div class=\"member-position\">\r\n            {{ user.JobPositionName }} - {{ user.OrganizationUnitName }} -\r\n            {{ user.OrganizationName }}\r\n          </div>\r\n        </div>\r\n        <div class=\"item-delete-icon flex\" @click=\"\"><div class=\"icon-delete\"></div></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <PopupAddUser :groupSelected=\"groupSelected\" :isHide=\"isHidePopup\" @hidePopup=\"hidePopup\" :userSelected=\"userOfGroupSelected\"/>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\nimport PopupAddUser from \"./PopupAddUser.vue\";\r\nexport default {\r\n  components: {\r\n    PopupAddUser,\r\n  },\r\n  props: [\"isHide\", \"groupSelectedId\"],\r\n  data() {\r\n    return {\r\n      isHidePopup: true,\r\n      timeout: null,\r\n      textSearch: \"\",\r\n      checkUserToDelete: [],\r\n      listDeleteUser: [],\r\n      userOfGroupSelected: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"groupSelected\"]),\r\n  },\r\n  watch: {\r\n    groupSelectedId: function (value) {\r\n      if (value != null) {\r\n        this.getGroupDataById(value);\r\n        this.getUserDataOfGroupPaging(100, 1, value)\r\n      }\r\n    },\r\n    textSearch: function (value) {\r\n      this.getUserDataOfGroupPaging(100, 1, this.groupSelectedId, value);\r\n    },\r\n    isHidePopup: function(value){\r\n      if(value){\r\n        this.getUserDataOfGroupPaging(100, 1, this.groupSelectedId)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"getGroupById\"]),\r\n    ...mapActions([\"getGroupDataById\"]),\r\n    /**\r\n     * Lấy ra từ khóa tìm kiếm sau khi nhập xong input\r\n     * Author; VQBao - 8/9/2022\r\n     */\r\n    getTextSearch(data) {\r\n      clearTimeout(this.timeout);\r\n      var self = this;\r\n      this.timeout = setTimeout(function () {\r\n        self.textSearch = data.value;\r\n      }, 500);\r\n    },\r\n    /**\r\n     * Ẩn dialog khi bấm vào icon tắt\r\n     * Author: VQBao - 30/8/2022\r\n     */\r\n    hideDialog() {\r\n      this.$emit(\"hideDialog\", true);\r\n    },\r\n    /**\r\n     * Khi click vào button thêm thành viên thì mở popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\r\n    addNewUser() {\r\n      this.hidePopup(false);\r\n    },\r\n    /**\r\n     * Ẩn hiện popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\r\n    hidePopup(isHide) {\r\n      this.isHidePopup = isHide;\r\n    },\r\n    /**\r\n     * Thực hiện xóa nhiều người dùng ra khỏi nhóm\r\n     * Author: VQBao - 12/9/2022\r\n     */\r\n    async deleteMultiUserOfGroup(){\r\n      if(this.listDeleteUser.length < this.userOfGroupSelected.length){\r\n        try {\r\n          await axios.delete(`https://localhost:44382/api/v1/UserGroups/DeleteMultiUserOfGroup?groupId=` + this.groupSelectedId,{ data: this.listDeleteUser}).then(() => {\r\n            this.checkUserToDelete = [];\r\n            this.listDeleteUser = [];\r\n            this.hideDialog();\r\n            this.$emit(\"loadData\");\r\n          })\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * Lấy số lượng checkbox đang được check\r\n     * Author: VQBao - 12/9/2022\r\n     */\r\n    checkUserCheckbox(userId, index){\r\n      if(this.checkUserToDelete[index]){\r\n        this.listDeleteUser.push(userId);\r\n      } else {\r\n        let id = this.listDeleteUser.indexOf(userId);\r\n        this.listDeleteUser.splice(id, 1);\r\n      }\r\n      if(this.listDeleteUser.length > 0){\r\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 278px)\";\r\n      } else {\r\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 226px)\";\r\n      }\r\n    },\r\n    /**\r\n     * Bỏ chọn tất cả các checkbox\r\n     * Author: VQBao - 12/9/2022\r\n     */\r\n    uncheckAllUser(){\r\n      this.checkUserToDelete = [];\r\n      this.listDeleteUser = [];\r\n    },\r\n\r\n    /**\r\n   * Phân trang tìm kiếm thành viên thuộc nhóm người dùng\r\n   * Author: VQBao - 8/9/2022\r\n   */\r\n    async getUserDataOfGroupPaging(pageSize, pageNumber, userGroupId, searchByText) {\r\n      try {\r\n        await axios\r\n          .get(`https://localhost:44382/api/v1/UserGroups/MemberOfGroupPaging`, {\r\n            params: {\r\n              pageSize: pageSize,\r\n              pageNumber: pageNumber,\r\n              userGroupId: userGroupId,\r\n              searchByText: searchByText\r\n            },\r\n          })\r\n          .then((response) => {\r\n            this.userOfGroupSelected = response.data.Data;\r\n          });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.hide {\r\n  display: none !important;\r\n}\r\n.dialog-user-group-detail {\r\n  width: 663px;\r\n  height: 100vh;\r\n  box-shadow: 0 0 10px 0 rgb(0 0 0 / 10%);\r\n  z-index: 8;\r\n  background-color: #fff;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  overflow: auto;\r\n  padding: 24px;\r\n  box-sizing: border-box;\r\n}\r\n.icon-close-detail {\r\n  position: absolute;\r\n  top: 24px;\r\n  right: 24px;\r\n  justify-content: center;\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n}\r\n.icon-close-detail:hover {\r\n  background-color: rgb(220, 220, 220);\r\n}\r\n.group-name {\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n}\r\n.group-title {\r\n  height: 24px;\r\n  box-sizing: border-box;\r\n}\r\n.group-status {\r\n  color: rgb(102, 209, 129);\r\n  font-weight: 700;\r\n  height: 24px;\r\n  box-sizing: border-box;\r\n}\r\n.active-dot {\r\n  height: 8px;\r\n  width: 8px;\r\n  border-radius: 50%;\r\n  background-color: rgb(102, 209, 129);\r\n  margin-right: 4px;\r\n  margin-left: 4px;\r\n}\r\n.group-description {\r\n  margin-top: 16px !important;\r\n}\r\n.line-16 {\r\n  margin-top: 40px;\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n.group-member-text {\r\n  margin-top: 24px;\r\n  margin-bottom: 12px;\r\n  font-weight: 700;\r\n}\r\n.block-toolbar {\r\n  height: 36px;\r\n  position: relative;\r\n  margin-bottom: 16px;\r\n}\r\n.block-input {\r\n  width: 288px;\r\n}\r\n.block-button-add {\r\n  position: absolute;\r\n  right: 0;\r\n}\r\n.block-navbar {\r\n  height: 36px;\r\n  margin-bottom: 16px;\r\n}\r\n.selected-quantity {\r\n  margin: 0 16px 0 0;\r\n}\r\n.disselect-span {\r\n  margin: 0 8px 0 0;\r\n  color: #13b2d8;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n}\r\n.scroll-block {\r\n  height: calc(100% - 226px);\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  overflow: auto;\r\n}\r\n.member-item {\r\n  height: 64px;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n.member-item:hover {\r\n  background-color: var(--primary-bg);\r\n}\r\n.member-item-checkbox {\r\n  height: 18px;\r\n  width: 18px;\r\n  box-sizing: border-box;\r\n  margin-right: 12px;\r\n}\r\n.member-image {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\r\n}\r\n.member-name {\r\n  color: #2c3e50;\r\n}\r\n.member-email {\r\n  color: #616767;\r\n}\r\n.member-position {\r\n  color: #616767;\r\n}\r\n.item-delete-icon {\r\n  position: absolute;\r\n  width: 24px;\r\n  height: 24px;\r\n  justify-content: center;\r\n  right: 16px;\r\n  cursor: pointer;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}