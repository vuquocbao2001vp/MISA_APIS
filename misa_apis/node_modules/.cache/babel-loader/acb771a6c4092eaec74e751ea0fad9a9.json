{"ast":null,"code":"import axios from \"axios\";\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\nimport PopupAddUser from \"./PopupAddUser.vue\";\nexport default {\n  components: {\n    PopupAddUser\n  },\n  props: [\"isHide\", \"groupSelectedId\"],\n\n  data() {\n    return {\n      isHidePopup: true,\n      timeout: null,\n      textSearch: \"\",\n      checkUserToDelete: [],\n      listDeleteUser: []\n    };\n  },\n\n  computed: { ...mapGetters([\"groupSelected\", \"userOfGroupSelected\", \"memberPaging\"])\n  },\n  watch: {\n    groupSelectedId: function (value) {\n      if (value != null) {\n        this.getGroupDataById(this.groupSelectedId);\n        this.getUserDataOfGroupPaging({\n          userGroupId: this.groupSelectedId,\n          pageSize: 50,\n          pageNumber: 1,\n          searchByText: value,\n          searchByPosition: null,\n          MISACode: null\n        });\n      }\n    },\n    textSearch: function (value) {\n      this.getUserDataOfGroupPaging({\n        userGroupId: this.groupSelectedId,\n        pageSize: 50,\n        pageNumber: 1,\n        searchByText: value,\n        searchByPosition: null,\n        MISACode: null\n      });\n    }\n  },\n  methods: { ...mapMutations([\"getGroupById\", \"getUserOfGroupPaging\"]),\n    ...mapActions([\"getGroupDataById\", \"getUserDataOfGroupPaging\"]),\n\n    /**\r\n     * Lấy ra từ khóa tìm kiếm sau khi nhập xong input\r\n     * Author; VQBao - 8/9/2022\r\n     */\n    getTextSearch(data) {\n      clearTimeout(this.timeout);\n      var self = this;\n      this.timeout = setTimeout(function () {\n        self.textSearch = data.value;\n      }, 500);\n    },\n\n    /**\r\n     * Ẩn dialog khi bấm vào icon tắt\r\n     * Author: VQBao - 30/8/2022\r\n     */\n    hideDialog() {\n      this.$emit(\"hideDialog\", true);\n    },\n\n    /**\r\n     * Khi click vào button thêm thành viên thì mở popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\n    addNewUser() {\n      this.hidePopup(false);\n    },\n\n    /**\r\n     * Ẩn hiện popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\n    hidePopup(isHide) {\n      this.isHidePopup = isHide;\n    },\n\n    /**\r\n     * Thực hiện xóa nhiều người dùng ra khỏi nhóm\r\n     * Author: VQBao - 12/9/2022\r\n     */\n    async deleteMultiUserOfGroup() {\n      if (this.listDeleteUser.length < this.userOfGroupSelected.length) {\n        try {\n          await axios.delete(`https://localhost:44382/api/v1/UserGroups/DeleteMultiUserOfGroup?groupId=` + this.groupSelectedId, {\n            data: this.listDeleteUser\n          }).then(() => {\n            this.checkUserToDelete = [];\n            this.listDeleteUser = [];\n            this.hideDialog();\n            this.$emit(\"loadData\");\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    },\n\n    /**\r\n     * Lấy số lượng checkbox đang được check\r\n     * Author: VQBao - 12/9/2022\r\n     */\n    checkUserCheckbox(userId, index) {\n      if (this.checkUserToDelete[index]) {\n        this.listDeleteUser.push(userId);\n      } else {\n        let id = this.listDeleteUser.indexOf(userId);\n        this.listDeleteUser.splice(id, 1);\n      }\n\n      if (this.listDeleteUser.length > 0) {\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 278px)\";\n      } else {\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 226px)\";\n      }\n    },\n\n    /**\r\n     * Bỏ chọn tất cả các checkbox\r\n     * Author: VQBao - 12/9/2022\r\n     */\n    uncheckAllUser() {\n      this.checkUserToDelete = [];\n      this.listDeleteUser = [];\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAmEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,UAAnC,QAAqD,MAArD;AACA,OAAOC,YAAP,MAAyB,oBAAzB;AACA,eAAe;EACbC,UAAU,EAAE;IACVD;EADU,CADC;EAIbE,KAAK,EAAE,CAAC,QAAD,EAAW,iBAAX,CAJM;;EAKbC,IAAI,GAAG;IACL,OAAO;MACLC,WAAW,EAAE,IADR;MAELC,OAAO,EAAE,IAFJ;MAGLC,UAAU,EAAE,EAHP;MAILC,iBAAiB,EAAE,EAJd;MAKLC,cAAc,EAAE;IALX,CAAP;EAOD,CAbY;;EAcbC,QAAQ,EAAE,EACR,GAAGV,UAAU,CAAC,CAAC,eAAD,EAAkB,qBAAlB,EAAyC,cAAzC,CAAD;EADL,CAdG;EAiBbW,KAAK,EAAE;IACLC,eAAe,EAAE,UAAUC,KAAV,EAAiB;MAChC,IAAIA,KAAI,IAAK,IAAb,EAAmB;QACjB,KAAKC,gBAAL,CAAsB,KAAKF,eAA3B;QACA,KAAKG,wBAAL,CAA8B;UAC5BC,WAAW,EAAE,KAAKJ,eADU;UAE5BK,QAAQ,EAAE,EAFkB;UAG5BC,UAAU,EAAE,CAHgB;UAI5BC,YAAY,EAAEN,KAJc;UAK5BO,gBAAgB,EAAE,IALU;UAM5BC,QAAQ,EAAE;QANkB,CAA9B;MAQF;IACD,CAbI;IAcLd,UAAU,EAAE,UAAUM,KAAV,EAAiB;MAC3B,KAAKE,wBAAL,CAA8B;QAC5BC,WAAW,EAAE,KAAKJ,eADU;QAE5BK,QAAQ,EAAE,EAFkB;QAG5BC,UAAU,EAAE,CAHgB;QAI5BC,YAAY,EAAEN,KAJc;QAK5BO,gBAAgB,EAAE,IALU;QAM5BC,QAAQ,EAAE;MANkB,CAA9B;IAQD;EAvBI,CAjBM;EA0CbC,OAAO,EAAE,EACP,GAAGxB,YAAY,CAAC,CAAC,cAAD,EAAiB,sBAAjB,CAAD,CADR;IAEP,GAAGC,UAAU,CAAC,CAAC,kBAAD,EAAqB,0BAArB,CAAD,CAFN;;IAGP;;;;IAIAwB,aAAa,CAACnB,IAAD,EAAO;MAClBoB,YAAY,CAAC,KAAKlB,OAAN,CAAZ;MACA,IAAImB,IAAG,GAAI,IAAX;MACA,KAAKnB,OAAL,GAAeoB,UAAU,CAAC,YAAY;QACpCD,IAAI,CAAClB,UAAL,GAAkBH,IAAI,CAACS,KAAvB;MACD,CAFwB,EAEtB,GAFsB,CAAzB;IAGD,CAbM;;IAcP;;;;IAIAc,UAAU,GAAG;MACX,KAAKC,KAAL,CAAW,YAAX,EAAyB,IAAzB;IACD,CApBM;;IAqBP;;;;IAIAC,UAAU,GAAG;MACX,KAAKC,SAAL,CAAe,KAAf;IACD,CA3BM;;IA4BP;;;;IAIAA,SAAS,CAACC,MAAD,EAAS;MAChB,KAAK1B,WAAL,GAAmB0B,MAAnB;IACD,CAlCM;;IAmCP;;;;IAIA,MAAMC,sBAAN,GAA8B;MAC5B,IAAG,KAAKvB,cAAL,CAAoBwB,MAApB,GAA6B,KAAKC,mBAAL,CAAyBD,MAAzD,EAAgE;QAC9D,IAAI;UACF,MAAMpC,KAAK,CAACsC,MAAN,CAAc,2EAAD,GAA8E,KAAKvB,eAAhG,EAAgH;YAAER,IAAI,EAAE,KAAKK;UAAb,CAAhH,EAA8I2B,IAA9I,CAAmJ,MAAM;YAC7J,KAAK5B,iBAAL,GAAyB,EAAzB;YACA,KAAKC,cAAL,GAAsB,EAAtB;YACA,KAAKkB,UAAL;YACA,KAAKC,KAAL,CAAW,UAAX;UACD,CALK,CAAN;QAMF,CAPA,CAOE,OAAOS,KAAP,EAAc;UACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ;QACF;MACF;IACD,CApDM;;IAqDP;;;;IAIAG,iBAAiB,CAACC,MAAD,EAASC,KAAT,EAAe;MAC9B,IAAG,KAAKlC,iBAAL,CAAuBkC,KAAvB,CAAH,EAAiC;QAC/B,KAAKjC,cAAL,CAAoBkC,IAApB,CAAyBF,MAAzB;MACF,CAFA,MAEO;QACL,IAAIG,EAAC,GAAI,KAAKnC,cAAL,CAAoBoC,OAApB,CAA4BJ,MAA5B,CAAT;QACA,KAAKhC,cAAL,CAAoBqC,MAApB,CAA2BF,EAA3B,EAA+B,CAA/B;MACF;;MACA,IAAG,KAAKnC,cAAL,CAAoBwB,MAApB,GAA6B,CAAhC,EAAkC;QAChCc,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CC,MAA7C,GAAsD,oBAAtD;MACF,CAFA,MAEO;QACLH,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CC,MAA7C,GAAsD,oBAAtD;MACF;IACD,CArEM;;IAsEP;;;;IAIAC,cAAc,GAAE;MACd,KAAK3C,iBAAL,GAAyB,EAAzB;MACA,KAAKC,cAAL,GAAsB,EAAtB;IACF;;EA7EO;AA1CI,CAAf","names":["axios","mapMutations","mapActions","mapGetters","PopupAddUser","components","props","data","isHidePopup","timeout","textSearch","checkUserToDelete","listDeleteUser","computed","watch","groupSelectedId","value","getGroupDataById","getUserDataOfGroupPaging","userGroupId","pageSize","pageNumber","searchByText","searchByPosition","MISACode","methods","getTextSearch","clearTimeout","self","setTimeout","hideDialog","$emit","addNewUser","hidePopup","isHide","deleteMultiUserOfGroup","length","userOfGroupSelected","delete","then","error","console","log","checkUserCheckbox","userId","index","push","id","indexOf","splice","document","getElementById","style","height","uncheckAllUser"],"sourceRoot":"","sources":["E:\\MisaProject\\MISA_APIS\\misa_apis\\src\\screens\\establish\\userGroup\\DialogUserGroupDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"dialog-user-group-detail\" :class=\"{ hide: isHide }\">\r\n    <div class=\"icon-close-detail flex\" @click=\"hideDialog\">\r\n      <div class=\"icon-close\"></div>\r\n    </div>\r\n    <div class=\"top-block\">\r\n      <div class=\"group-title flex\">\r\n        <div class=\"group-name\">{{ groupSelected.UserGroupName }}</div>\r\n        <div class=\"group-status flex\">\r\n          <div class=\"active-dot\"></div>\r\n          Đang sử dụng\r\n        </div>\r\n      </div>\r\n      <div class=\"group-description\">{{ groupSelected.Description }}</div>\r\n      <div class=\"line-16\"></div>\r\n      <div class=\"group-member-text\">\r\n        Thành viên (<span>{{ userOfGroupSelected.length }}</span\r\n        >)\r\n      </div>\r\n      <div class=\"block-toolbar flex\">\r\n        <div class=\"block-input\">\r\n          <DxTextBox\r\n            placeholder=\"Tìm kiếm thành viên\"\r\n            value-change-event=\"keyup\"\r\n            @value-changed=\"getTextSearch\"\r\n          />\r\n        </div>\r\n        <div class=\"block-button-add\" @click=\"addNewUser\">\r\n          <BaseButton buttonType=\"icon\" buttonName=\"Thêm thành viên\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"block-navbar flex\" v-show=\"listDeleteUser.length > 0\">\r\n        <div class=\"selected-quantity\"><span>{{listDeleteUser.length}}</span> đang chọn</div>\r\n        <div class=\"disselect-span\" @click=\"uncheckAllUser\">Bỏ chọn</div>\r\n        <div class=\"delete-member-button\" @click=\"deleteMultiUserOfGroup\">\r\n          <BaseButton buttonType=\"red\" buttonName=\"Loại bỏ thành viên\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div id=\"scrollBlock\" class=\"scroll-block\">\r\n      <div\r\n        class=\"member-item flex\"\r\n        v-for=\"(user, index) in userOfGroupSelected\"\r\n        :key=\"user.UserID\"\r\n      >\r\n        <div class=\"member-item-checkbox\">\r\n          <div @click=\"checkUserCheckbox(user.UserID, index)\"><DxCheckBox v-model:value=\"checkUserToDelete[index]\"/></div>\r\n        </div>\r\n        <div class=\"member-image icon-center avatar-girl\"></div>\r\n        <div class=\"member-info\">\r\n          <div class=\"member-name flex\">\r\n            {{ user.FullName }} (\r\n            <div class=\"member-email\">{{ user.Email }}</div>\r\n            )\r\n          </div>\r\n          <div class=\"member-position\">\r\n            {{ user.JobPositionName }} - {{ user.OrganizationUnitName }} -\r\n            {{ user.OrganizationName }}\r\n          </div>\r\n        </div>\r\n        <div class=\"item-delete-icon flex\"><div class=\"icon-delete\"></div></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <PopupAddUser :groupSelected=\"groupSelected\" :isHide=\"isHidePopup\" @hidePopup=\"hidePopup\" />\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport { mapMutations, mapActions, mapGetters } from \"vuex\";\r\nimport PopupAddUser from \"./PopupAddUser.vue\";\r\nexport default {\r\n  components: {\r\n    PopupAddUser,\r\n  },\r\n  props: [\"isHide\", \"groupSelectedId\"],\r\n  data() {\r\n    return {\r\n      isHidePopup: true,\r\n      timeout: null,\r\n      textSearch: \"\",\r\n      checkUserToDelete: [],\r\n      listDeleteUser: [],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"groupSelected\", \"userOfGroupSelected\", \"memberPaging\"]),\r\n  },\r\n  watch: {\r\n    groupSelectedId: function (value) {\r\n      if (value != null) {\r\n        this.getGroupDataById(this.groupSelectedId);\r\n        this.getUserDataOfGroupPaging({\r\n          userGroupId: this.groupSelectedId,\r\n          pageSize: 50,\r\n          pageNumber: 1,\r\n          searchByText: value,\r\n          searchByPosition: null,\r\n          MISACode: null,\r\n        })\r\n      }\r\n    },\r\n    textSearch: function (value) {\r\n      this.getUserDataOfGroupPaging({\r\n        userGroupId: this.groupSelectedId,\r\n        pageSize: 50,\r\n        pageNumber: 1,\r\n        searchByText: value,\r\n        searchByPosition: null,\r\n        MISACode: null,\r\n      })\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"getGroupById\", \"getUserOfGroupPaging\"]),\r\n    ...mapActions([\"getGroupDataById\", \"getUserDataOfGroupPaging\"]),\r\n    /**\r\n     * Lấy ra từ khóa tìm kiếm sau khi nhập xong input\r\n     * Author; VQBao - 8/9/2022\r\n     */\r\n    getTextSearch(data) {\r\n      clearTimeout(this.timeout);\r\n      var self = this;\r\n      this.timeout = setTimeout(function () {\r\n        self.textSearch = data.value;\r\n      }, 500);\r\n    },\r\n    /**\r\n     * Ẩn dialog khi bấm vào icon tắt\r\n     * Author: VQBao - 30/8/2022\r\n     */\r\n    hideDialog() {\r\n      this.$emit(\"hideDialog\", true);\r\n    },\r\n    /**\r\n     * Khi click vào button thêm thành viên thì mở popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\r\n    addNewUser() {\r\n      this.hidePopup(false);\r\n    },\r\n    /**\r\n     * Ẩn hiện popup thêm thành viên\r\n     * Author: VQBao - 30/8/2022\r\n     */\r\n    hidePopup(isHide) {\r\n      this.isHidePopup = isHide;\r\n    },\r\n    /**\r\n     * Thực hiện xóa nhiều người dùng ra khỏi nhóm\r\n     * Author: VQBao - 12/9/2022\r\n     */\r\n    async deleteMultiUserOfGroup(){\r\n      if(this.listDeleteUser.length < this.userOfGroupSelected.length){\r\n        try {\r\n          await axios.delete(`https://localhost:44382/api/v1/UserGroups/DeleteMultiUserOfGroup?groupId=` + this.groupSelectedId,{ data: this.listDeleteUser}).then(() => {\r\n            this.checkUserToDelete = [];\r\n            this.listDeleteUser = [];\r\n            this.hideDialog();\r\n            this.$emit(\"loadData\");\r\n          })\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * Lấy số lượng checkbox đang được check\r\n     * Author: VQBao - 12/9/2022\r\n     */\r\n    checkUserCheckbox(userId, index){\r\n      if(this.checkUserToDelete[index]){\r\n        this.listDeleteUser.push(userId);\r\n      } else {\r\n        let id = this.listDeleteUser.indexOf(userId);\r\n        this.listDeleteUser.splice(id, 1);\r\n      }\r\n      if(this.listDeleteUser.length > 0){\r\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 278px)\";\r\n      } else {\r\n        document.getElementById(\"scrollBlock\").style.height = \"calc(100% - 226px)\";\r\n      }\r\n    },\r\n    /**\r\n     * Bỏ chọn tất cả các checkbox\r\n     * Author: VQBao - 12/9/2022\r\n     */\r\n    uncheckAllUser(){\r\n      this.checkUserToDelete = [];\r\n      this.listDeleteUser = [];\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.hide {\r\n  display: none !important;\r\n}\r\n.dialog-user-group-detail {\r\n  width: 663px;\r\n  height: 100vh;\r\n  box-shadow: 0 0 10px 0 rgb(0 0 0 / 10%);\r\n  z-index: 8;\r\n  background-color: #fff;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  overflow: auto;\r\n  padding: 24px;\r\n  box-sizing: border-box;\r\n}\r\n.icon-close-detail {\r\n  position: absolute;\r\n  top: 24px;\r\n  right: 24px;\r\n  justify-content: center;\r\n  width: 36px;\r\n  height: 36px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n}\r\n.icon-close-detail:hover {\r\n  background-color: rgb(220, 220, 220);\r\n}\r\n.group-name {\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n}\r\n.group-title {\r\n  height: 24px;\r\n  box-sizing: border-box;\r\n}\r\n.group-status {\r\n  color: rgb(102, 209, 129);\r\n  font-weight: 700;\r\n  height: 24px;\r\n  box-sizing: border-box;\r\n}\r\n.active-dot {\r\n  height: 8px;\r\n  width: 8px;\r\n  border-radius: 50%;\r\n  background-color: rgb(102, 209, 129);\r\n  margin-right: 4px;\r\n  margin-left: 4px;\r\n}\r\n.group-description {\r\n  margin-top: 16px !important;\r\n}\r\n.line-16 {\r\n  margin-top: 40px;\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n.group-member-text {\r\n  margin-top: 24px;\r\n  margin-bottom: 12px;\r\n  font-weight: 700;\r\n}\r\n.block-toolbar {\r\n  height: 36px;\r\n  position: relative;\r\n  margin-bottom: 16px;\r\n}\r\n.block-input {\r\n  width: 288px;\r\n}\r\n.block-button-add {\r\n  position: absolute;\r\n  right: 0;\r\n}\r\n.block-navbar {\r\n  height: 36px;\r\n  margin-bottom: 16px;\r\n}\r\n.selected-quantity {\r\n  margin: 0 16px 0 0;\r\n}\r\n.disselect-span {\r\n  margin: 0 8px 0 0;\r\n  color: #13b2d8;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n}\r\n.scroll-block {\r\n  height: calc(100% - 226px);\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  overflow: auto;\r\n}\r\n.member-item {\r\n  height: 64px;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n.member-item:hover {\r\n  background-color: var(--primary-bg);\r\n}\r\n.member-item-checkbox {\r\n  height: 18px;\r\n  width: 18px;\r\n  box-sizing: border-box;\r\n  margin-right: 12px;\r\n}\r\n.member-image {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  margin-right: 12px;\r\n}\r\n.member-name {\r\n  color: #2c3e50;\r\n}\r\n.member-email {\r\n  color: #616767;\r\n}\r\n.member-position {\r\n  color: #616767;\r\n}\r\n.item-delete-icon {\r\n  position: absolute;\r\n  width: 24px;\r\n  height: 24px;\r\n  justify-content: center;\r\n  right: 16px;\r\n  cursor: pointer;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}